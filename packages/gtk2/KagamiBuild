# Description: GObject-based multi-platform GUI toolkit
# URL:         https://www.gtk.org/
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  atk cups gdk-pixbuf hicolor-icon-theme libxcomposite libxcursor libxdamage libxi libxinerama libxrandr pango
# Dep x86_64:       librsvg
# Dep i686:         librsvg
# Dep aarch64:      librsvg
# Dep armv7hnl:     librsvg-c
# Dep armv6l:       librsvg-c
# Dep powerpc64le:  librsvg
# Dep powerpc64:    librsvg
# Dep powerpc:      librsvg
# Dep s390x:        librsvg-c
# Dep riscv64:      librsvg-c
# Dep riscv32:      librsvg-c
# Section:     libs

name=gtk2
version=2.24.32
release=8
source=("http://ftp.gnome.org/pub/gnome/sources/gtk+/${version%.*}/gtk+-$version.tar.xz")

build() {
	cd "$SRC"/gtk+-$version
	sed -e 's#l \(gtk-.*\).sgml#& -o \1#' -i docs/{faq,tutorial}/Makefile.in

	./configure $BUILDFLAGS \
		--prefix=/usr \
		--sysconfdir=/etc \
		--disable-gtk-doc

	sed -i 's/ -shared / -Wl,--as-needed\0/g' libtool
	make
	make DESTDIR="$PKG" install

	rm "$PKG"/usr/bin/gtk-update-icon-cache
}
